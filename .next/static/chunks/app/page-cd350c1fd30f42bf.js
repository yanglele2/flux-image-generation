(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9916:function(e,a,s){Promise.resolve().then(s.bind(s,1458))},1458:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return w}});var t=s(7437),l=s(2265),r=s(4839),n=s(6164);function i(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,n.m6)((0,r.W)(a))}let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("textarea",{className:i("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...l})});o.displayName="Textarea";var d=s(5068);let c=l.forwardRef((e,a)=>{var s,l,r;let{className:n,showValue:o=!1,...c}=e;return(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsxs)(d.fC,{ref:a,className:i("relative flex w-full touch-none select-none items-center",n),...c,children:[(0,t.jsx)(d.fQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,t.jsx)(d.e6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(d.bU,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}),o&&(0,t.jsx)("div",{className:"absolute -top-6 left-0 right-0 text-center text-sm",children:null!==(r=null===(s=c.value)||void 0===s?void 0:s[0])&&void 0!==r?r:null===(l=c.defaultValue)||void 0===l?void 0:l[0]})]})});c.displayName=d.fC.displayName;var m=s(4396),u=s(4867);let f=m.fC,h=m.xz;m.ZA,m.Uv,m.Tr,m.Ee,l.forwardRef((e,a)=>{let{className:s,inset:l,children:r,...n}=e;return(0,t.jsxs)(m.fF,{ref:a,className:i("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",l&&"pl-8",s),...n,children:[r,(0,t.jsx)(u.XCv,{className:"ml-auto h-4 w-4"})]})}).displayName=m.fF.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(m.tu,{ref:a,className:i("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})}).displayName=m.tu.displayName;let x=l.forwardRef((e,a)=>{let{className:s,sideOffset:l=4,...r}=e;return(0,t.jsx)(m.Uv,{children:(0,t.jsx)(m.VY,{ref:a,sideOffset:l,className:i("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})})});x.displayName=m.VY.displayName;let p=l.forwardRef((e,a)=>{let{className:s,inset:l,...r}=e;return(0,t.jsx)(m.ck,{ref:a,className:i("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",s),...r})});p.displayName=m.ck.displayName,l.forwardRef((e,a)=>{let{className:s,children:l,checked:r,...n}=e;return(0,t.jsxs)(m.oC,{ref:a,className:i("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(m.wU,{children:(0,t.jsx)(u.nQG,{className:"h-4 w-4"})})}),l]})}).displayName=m.oC.displayName,l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsxs)(m.Rk,{ref:a,className:i("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(m.wU,{children:(0,t.jsx)(u.jXb,{className:"h-4 w-4 fill-current"})})}),l]})}).displayName=m.Rk.displayName,l.forwardRef((e,a)=>{let{className:s,inset:l,...r}=e;return(0,t.jsx)(m.__,{ref:a,className:i("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",s),...r})}).displayName=m.__.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(m.Z0,{ref:a,className:i("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=m.Z0.displayName;var b=s(1538);let g=(0,s(2218).j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),j=l.forwardRef((e,a)=>{let{className:s,variant:l,size:r,asChild:n=!1,...o}=e,d=n?b.g7:"button";return(0,t.jsx)(d,{className:i(g({variant:l,size:r,className:s})),ref:a,...o})});j.displayName="Button";var y=s(9324);let v=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(y.fC,{ref:a,className:i("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...l,children:(0,t.jsx)(y.z$,{className:i("flex items-center justify-center text-current"),children:(0,t.jsx)(u.nQG,{className:"h-4 w-4"})})})});function w(){let[e,a]=(0,l.useState)(""),[s,r]=(0,l.useState)(50),[n,i]=(0,l.useState)(.5),[d,m]=(0,l.useState)("16:9"),[u,b]=(0,l.useState)("png"),[g,y]=(0,l.useState)(!1),[w,N]=(0,l.useState)(null),[k,C]=(0,l.useState)(!1),[R,S]=(0,l.useState)(null),z=(0,l.useCallback)(async()=>{C(!0),S(null),console.log("前端 - 质量: ".concat(s,", 提示词权重: ").concat(n,", 禁用安全检查: ").concat(g));try{let a=await fetch("http://localhost:4000/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,quality:s,promptWeight:n,aspectRatio:d,imageFormat:u,disableSafetyCheck:g})}),t=await a.json();t.success?N(t.image):(console.error("生成图像失败:",t.error),S(t.error||"生成图像失败，请重试"),t.details&&(console.error("错误详情:",t.details),S("".concat(t.error,": ").concat(t.details))))}catch(e){console.error("生成图像时出错:",e),S("生成图像时发生错误，请检查网络连接并重试")}finally{C(!1)}},[e,s,n,d,u,g]);return(0,t.jsxs)("main",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-4",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Flux 图片生成器"}),(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsx)(o,{placeholder:"输入你的提示词",className:"w-full p-2 mb-4 bg-gray-800 border border-gray-700 rounded text-white",value:e,onChange:e=>a(e.target.value)}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"quality-slider",className:"block mb-2",children:"图片质量"}),(0,t.jsx)(c,{id:"quality-slider",min:0,max:100,value:[s],onValueChange:e=>r(e[0]),step:1,className:"w-full",showValue:!0})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"prompt-weight-slider",className:"block mb-2",children:"提示词权重"}),(0,t.jsx)(c,{id:"prompt-weight-slider",min:0,max:1,value:[n],onValueChange:e=>i(e[0]),step:.01,className:"w-full",showValue:!0})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2",children:"图片比例"}),(0,t.jsxs)(f,{children:[(0,t.jsx)(h,{asChild:!0,children:(0,t.jsxs)(j,{variant:"outline",className:"w-full justify-between h-9 px-4 py-2 text-black bg-white",children:[d,(0,t.jsx)("span",{className:"ml-2",children:"▼"})]})}),(0,t.jsxs)(x,{children:[(0,t.jsx)(p,{onClick:()=>m("16:9"),children:"16:9"}),(0,t.jsx)(p,{onClick:()=>m("9:16"),children:"9:16"}),(0,t.jsx)(p,{onClick:()=>m("1:1"),children:"1:1"})]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2",children:"选择图片格式"}),(0,t.jsxs)(f,{children:[(0,t.jsx)(h,{asChild:!0,children:(0,t.jsxs)(j,{variant:"outline",className:"w-full justify-between h-9 px-4 py-2 text-black bg-white",children:[u,(0,t.jsx)("span",{className:"ml-2",children:"▼"})]})}),(0,t.jsxs)(x,{children:[(0,t.jsx)(p,{onClick:()=>b("png"),children:"png"}),(0,t.jsx)(p,{onClick:()=>b("jpg"),children:"jpg"}),(0,t.jsx)(p,{onClick:()=>b("webp"),children:"webp"})]})]})]}),(0,t.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,t.jsx)(v,{id:"disable-safety-check",checked:g,onCheckedChange:e=>y(e)}),(0,t.jsx)("label",{htmlFor:"disable-safety-check",className:"ml-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"禁用安全检查"})]}),(0,t.jsx)(j,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white h-9 px-4 py-2",variant:"default",onClick:z,disabled:k,children:k?"生成中...":"生成图像"})]}),R&&(0,t.jsxs)("div",{className:"mt-4 p-2 bg-red-600 text-white rounded",children:["错误: ",R]}),(0,t.jsx)("div",{className:"mt-8 w-full max-w-md h-64 bg-gray-800 border border-gray-700 rounded flex items-center justify-center",children:k?(0,t.jsx)("p",{className:"text-gray-400",children:"正在生成图像..."}):w?(0,t.jsx)("img",{src:w,alt:"Generated",className:"max-w-full max-h-full object-contain"}):(0,t.jsx)("p",{className:"text-gray-400",children:"生成的图像将显示在这里"})})]})}v.displayName=y.fC.displayName}},function(e){e.O(0,[310,961,971,23,744],function(){return e(e.s=9916)}),_N_E=e.O()}]);